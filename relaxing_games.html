<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Soul Sync — Relax & Play</title>
<style>
  /* ---------- Base layout & theme ---------- */
  :root{
    --bg-a: #fb923c;
    --bg-b: #b5ff67;
    --card-bg: #fff8f0;
    --accent: #f97316;
    --muted: #6b4636;
    --text-dark:#1b1b1b;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, Arial, Helvetica, sans-serif;-webkit-font-smoothing:antialiased;}
  body{
    display:flex;
    flex-direction:column;
    align-items:center;
    min-height:100vh;
    background: linear-gradient(135deg,var(--bg-b), var(--bg-a));
    color: #111;
  }
  .container{width:100%;max-width:1100px;padding:22px;}

  /* ---------- Nav ---------- */
  .navbar{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .brand{display:flex;align-items:center;gap:12px;font-weight:700}
  .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#fff,#ffd7b5);box-shadow:0 6px 18px rgba(0,0,0,.12)}
  .nav-links{display:flex;gap:10px;align-items:center}
  .nav-links a{background:#fff;padding:8px 12px;border-radius:20px;color:var(--accent);text-decoration:none;font-weight:600}

  /* ---------- Header ---------- */
  .header{text-align:center;margin:18px 0}
  .header h1{margin:0;font-size:1.8rem}
  .header p{margin:6px 0 0;color:rgba(0,0,0,0.6)}

  /* ---------- Card & controls ---------- */
  .card{background:var(--card-bg);border-radius:12px;padding:18px;box-shadow:0 12px 30px rgba(11,11,11,.08);color:var(--text-dark)}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  .btn{background:#fff;color:var(--accent);padding:10px 16px;border-radius:999px;border:none;font-weight:700;cursor:pointer}
  .btn.small{padding:8px 12px;font-size:.92rem}
  .muted{color:var(--muted)}

  /* ---------- Game areas ---------- */
  .game { display:none; width:100%; max-width:820px; margin:0 auto; text-align:center }
  .game.active { display:block }
  .circle{margin:24px auto;width:150px;height:150px;border-radius:50%;background:#38bdf8;animation:breathe 8s infinite}
  @keyframes breathe{0%{transform:scale(1);opacity:0.6}50%{transform:scale(1.45);opacity:1}100%{transform:scale(1);opacity:0.6}}

  .grid{display:grid;grid-template-columns:repeat(4,80px);gap:10px;justify-content:center}
  .tile{width:80px;height:80px;border-radius:10px;background:#94a3b8;cursor:pointer;box-shadow:0 4px 8px rgba(0,0,0,0.06)}

  canvas{border-radius:10px;box-shadow:0 10px 26px rgba(11,11,11,.06)}
  #zcanvas{background:#fff8f0;border:2px solid rgba(0,0,0,0.06)}

  /* ---------- Quotes box ---------- */
  .quote-box{margin:16px auto;padding:16px;background:rgba(255,255,255,0.9);border-radius:12px;max-width:680px;color:var(--text-dark);font-style:italic}
  .quote-actions{margin-top:10px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap}

  /* ---------- Music control floating ---------- */
  .music-control{position:fixed;top:16px;right:16px;background:#fff;color:var(--accent);border:none;padding:10px 12px;border-radius:999px;cursor:pointer;font-weight:700;box-shadow:0 8px 22px rgba(0,0,0,.12)}
  .music-control:hover{background:#fff1e6}

  /* ---------- responsive ---------- */
  @media(max-width:780px){
    .grid{grid-template-columns:repeat(4,60px);gap:8px}
    .tile{width:60px;height:60px}
    #zcanvas{width:100%;height:240px}
  }
</style>
</head>
<body>
  <button id="musicBtn" class="music-control" aria-pressed="false">Music: Off</button>
  <audio id="bgMusic" loop preload="none">
    <source src="https://cdn.pixabay.com/download/audio/2022/10/12/audio_7c1e9d30b8.mp3?filename=forest-birds-nature-sounds-ambient-122214.mp3" type="audio/mpeg">
    <!-- Replace with your hosted audio file for production -->
  </audio>

  <div class="container">
    <header class="navbar" role="banner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>Soul Sync</div>
      </div>
      <nav class="nav-links" role="navigation" aria-label="Main Navigation">
        <a href="home.html">Home</a>
      </nav>
    </header>

    <section class="header">
      <h1>Relax & Play</h1>
      <p class="muted">Choose a calming exercise, play a gentle game, or get inspired.</p>
    </section>

    <section class="card" aria-labelledby="controls-title">
      <h2 id="controls-title" style="margin:0 0 10px">Select an activity</h2>

      <div class="controls" role="toolbar" aria-label="Game controls">
        <button class="btn" data-show="breathing">Breathing</button>
        <button class="btn" data-show="color">Color Match</button>
        <button class="btn" data-show="zen">Zen Drawing</button>
        <button class="btn" data-show="quotes">Quotes</button>

        <button id="shuffleTheme" class="btn small" title="Change color mood">Change Mood</button>
        <button id="clearCanvas" class="btn small" title="Clear drawing">Clear Drawing</button>
      </div>

      <!-- Breathing -->
      <div id="breathing" class="game active" role="region" aria-label="Breathing exercise">
        <h3>Breathe with the circle</h3>
        <div class="circle" aria-hidden="true"></div>
        <p class="muted">Follow the expansion and contraction: inhale — hold — exhale.</p>
        <div style="margin-top:10px;">
          <button id="startBreath" class="btn small">Start Guided Cycle</button>
          <button id="stopBreath" class="btn small">Stop</button>
        </div>
      </div>

      <!-- Color Match -->
      <div id="color" class="game" role="region" aria-label="Color matching game">
        <h3>Relaxing Color Match</h3>
        <p class="muted">Match pairs gently — no timers, no pressure.</p>
        <div id="grid" class="grid" style="margin-top:12px;"></div>
        <div style="margin-top:12px;"><button id="resetColor" class="btn small">Shuffle</button></div>
      </div>

      <!-- Zen Drawing -->
      <div id="zen" class="game" role="region" aria-label="Zen drawing">
        <h3>Zen Sand Drawing</h3>
        <p class="muted">Draw freely. Use touch or mouse. Clear when ready.</p>
        <canvas id="zcanvas" width="720" height="360" style="display:block;margin:10px auto;"></canvas>
      </div>

      <!-- Quotes -->
      <div id="quotes" class="game" role="region" aria-label="Motivational quotes">
        <h3>Get Inspired</h3>
        <div id="quoteBox" class="quote-box">Click <strong>Get Inspired</strong> below for a supportive message.</div>
        <div class="quote-actions">
          <button id="getQuote" class="btn">Get Inspired</button>
          <button id="saveQuote" class="btn small">Save Quote</button>
          <button id="viewSaved" class="btn small">View Saved</button>
        </div>
        <div id="savedList" style="margin-top:12px;display:none"></div>
      </div>
    </section>

    <footer style="margin-top:18px;text-align:center;color:rgba(0,0,0,.6);font-size:.95rem">
      © <span id="year"></span> Soul Sync — Take small steps. Reach out if you need help.
    </footer>
  </div>

<script>
/* ==========================
   Utility helpers (small)
   ========================== */
function $(sel){ return document.querySelector(sel) }
function $all(sel){ return Array.from(document.querySelectorAll(sel)) }
function toast(msg, ms=1800){
  const t = document.createElement('div');
  Object.assign(t.style,{position:'fixed',left:'50%',bottom:'28px',transform:'translateX(-50%)',background:'rgba(0,0,0,0.7)',color:'#fff',padding:'10px 14px',borderRadius:'10px',zIndex:9999,fontWeight:600});
  t.textContent = msg; document.body.appendChild(t);
  setTimeout(()=>t.remove(), ms);
}
document.getElementById('year').textContent = new Date().getFullYear();

/* ==========================
   Section switching & mood
   ========================== */
const games = ['breathing','color','zen','quotes'];
function showSection(id){
  games.forEach(g => document.getElementById(g).classList.remove('active'));
  const el = document.getElementById(id); if(el) el.classList.add('active');
}
$all('[data-show]').forEach(btn => btn.addEventListener('click', ()=> showSection(btn.dataset.show)));

const moodPalettes = [
  {bg1:'#fb923c', bg2:'#b5ff67'},
  {bg1:'#ffecd1', bg2:'#f97316'},
  {bg1:'#c7f9cc', bg2:'#90f7ec'},
  {bg1:'#ffd7e0', bg2:'#ffb86b'}
];
document.getElementById('shuffleTheme').addEventListener('click', ()=>{
  const p = moodPalettes[Math.floor(Math.random()*moodPalettes.length)];
  document.body.style.background = `linear-gradient(135deg, ${p.bg1}, ${p.bg2})`;
  toast('Mood changed');
});

/* ==========================
   Background music control
   ========================== */
const music = document.getElementById('bgMusic');
const musicBtn = document.getElementById('musicBtn');
let musicPlaying = false;
musicBtn.addEventListener('click', async ()=>{
  try{
    if(!musicPlaying){ await music.play(); musicPlaying = true; musicBtn.textContent = 'Music: On'; musicBtn.setAttribute('aria-pressed','true'); }
    else { music.pause(); musicPlaying = false; musicBtn.textContent = 'Music: Off'; musicBtn.setAttribute('aria-pressed','false'); }
  }catch(e){ toast('Play blocked — tap play on the page'); }
});

/* ==========================
   Breathing guided cycle
   ========================== */
let breathInterval = null;
const startBreathBtn = document.getElementById('startBreath');
const stopBreathBtn = document.getElementById('stopBreath');
startBreathBtn.addEventListener('click', startBreathing);
stopBreathBtn.addEventListener('click', stopBreathing);

function startBreathing(){
  stopBreathing();
  const circle = document.querySelector('.circle');
  // 4s inhale, 7s hold, 8s exhale (loop)
  let phase = 0;
  const phases = [
    {label:'Inhale', dur:4000, scale:1.45},
    {label:'Hold', dur:7000, scale:1.45},
    {label:'Exhale', dur:8000, scale:1.0}
  ];
  function step(){
    const p = phases[phase];
    circle.style.transition = `transform ${p.dur}ms ease-in-out, opacity ${p.dur}ms linear`;
    circle.style.transform = `scale(${p.scale})`;
    circle.style.opacity = p.scale === 1 ? 0.6 : 1;
    phase = (phase + 1) % phases.length;
  }
  step();
  breathInterval = setInterval(step, phases.reduce((s,pp)=>s+pp.dur,0));
  toast('Guided breathing started');
}

function stopBreathing(){
  if(breathInterval){ clearInterval(breathInterval); breathInterval = null; }
  const circle = document.querySelector('.circle');
  circle.style.transition = ''; circle.style.transform = 'scale(1)'; circle.style.opacity = 0.9;
  toast('Guided breathing stopped');
}

/* ==========================
   Color match game (gentle)
   ========================== */
const gridEl = document.getElementById('grid');
const colorSet = ["#38bdf8","#38bdf8","#f59e0b","#f59e0b","#22c55e","#22c55e","#ef4444","#ef4444"];

function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr; }

let colorState = { selected: [], matched: 0 };
function initColor(){
  gridEl.innerHTML = '';
  colorState = { selected: [], matched: 0 };
  const colors = shuffle([...colorSet]);
  colors.forEach(c => {
    const d = document.createElement('div');
    d.className = 'tile'; d.dataset.color = c; d.style.background = '#94a3b8';
    d.addEventListener('click', ()=>{
      if(colorState.selected.length < 2 && d.style.background === '#94a3b8'){
        d.style.background = c;
        colorState.selected.push(d);
        if(colorState.selected.length === 2){
          setTimeout(()=>{
            const [a,b] = colorState.selected;
            if(a.dataset.color !== b.dataset.color){
              a.style.background = '#94a3b8'; b.style.background = '#94a3b8';
            } else {
              colorState.matched += 2;
              a.style.boxShadow = 'inset 0 0 12px rgba(0,0,0,0.06)';
              b.style.boxShadow = 'inset 0 0 12px rgba(0,0,0,0.06)';
              if(colorState.matched === colorSet.length){
                setTimeout(()=>alert('Well done — gentle focus complete!'), 200);
              }
            }
            colorState.selected = [];
          }, 700);
        }
      }
    });
    gridEl.appendChild(d);
  });
}
document.getElementById('resetColor').addEventListener('click', ()=>{ initColor(); toast('Shuffled') });

/* ==========================
   Zen drawing canvas
   ========================== */
const canvas = document.getElementById('zcanvas');
const ctx = canvas.getContext('2d');
let drawing = false;
function resizeCanvas(){ /* keep internal size set in markup; responsive handled by CSS */ }
function startDraw(e){ drawing = true; ctx.beginPath(); const p = pointerPos(e); ctx.moveTo(p.x,p.y); }
function drawMove(e){ if(!drawing) return; const p = pointerPos(e); ctx.lineTo(p.x,p.y); ctx.strokeStyle = '#333'; ctx.lineWidth = 3; ctx.lineCap = 'round'; ctx.stroke(); ctx.beginPath(); ctx.moveTo(p.x,p.y); }
function stopDraw(){ drawing = false; ctx.beginPath(); }
function pointerPos(e){
  const rect = canvas.getBoundingClientRect();
  if(e.touches && e.touches[0]) return { x: e.touches[0].clientX - rect.left, y: e.touches[0].clientY - rect.top };
  return { x: e.clientX - rect.left, y: e.clientY - rect.top };
}
canvas.addEventListener('mousedown', startDraw); canvas.addEventListener('mousemove', drawMove); canvas.addEventListener('mouseup', stopDraw); canvas.addEventListener('mouseleave', stopDraw);
canvas.addEventListener('touchstart', startDraw, {passive:true}); canvas.addEventListener('touchmove', drawMove, {passive:true}); canvas.addEventListener('touchend', stopDraw);
document.getElementById('clearCanvas').addEventListener('click', ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); toast('Canvas cleared') });

/* ==========================
   Quotes (generate, save, view)
   ========================== */
const quotes = [
  "This too shall pass. You are stronger than you think.",
  "Every day may not be good, but there is something good in every day.",
  "Your story isn’t over yet; this is just one chapter.",
  "Breathe. You are capable. You are enough.",
  "Small steps every day lead to big changes.",
  "Healing takes time, and that’s okay.",
  "You are not alone. Support is always within reach.",
  "Gratitude turns what we have into enough."
];
function newQuote(){
  const q = quotes[Math.floor(Math.random()*quotes.length)];
  document.getElementById('quoteBox').textContent = q;
}
document.getElementById('getQuote').addEventListener('click', newQuote);

function saveQuote(){
  const current = document.getElementById('quoteBox').textContent;
  if(!current) { toast('No quote to save'); return; }
  const saved = JSON.parse(localStorage.getItem('saved_quotes') || '[]');
  saved.unshift({q:current, t:Date.now()});
  localStorage.setItem('saved_quotes', JSON.stringify(saved));
  toast('Quote saved');
}
function viewSaved(){
  const saved = JSON.parse(localStorage.getItem('saved_quotes') || '[]');
  const container = document.getElementById('savedList');
  if(saved.length===0){ container.style.display='block'; container.innerHTML = '<p class="muted">No saved quotes yet.</p>'; return; }
  container.style.display='block';
  container.innerHTML = saved.map(s => `<div style="padding:10px;background:#fff;margin-bottom:8px;border-radius:8px;color:${'#111'}">${s.q}<div style="font-size:0.85rem;color:${'#666'};margin-top:6px">${new Date(s.t).toLocaleString()}</div></div>`).join('');
}
document.getElementById('saveQuote').addEventListener('click', saveQuote);
document.getElementById('viewSaved').addEventListener('click', viewSaved);

/* ==========================
   init on load
   ========================== */
window.addEventListener('load', ()=>{
  initColor();
  newQuote();
  // ensure canvas has visible stroke settings
  ctx.lineWidth = 3; ctx.lineCap = 'round'; ctx.strokeStyle = '#333';
});
</script>
</body>
</html>
